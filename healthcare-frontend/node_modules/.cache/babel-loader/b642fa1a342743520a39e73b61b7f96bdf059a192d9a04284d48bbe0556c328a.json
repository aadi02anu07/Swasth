{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{auth}from\"../firebase\";import{useNavigate}from\"react-router-dom\";import{Container,Table,Button,Spinner,Modal,Form}from\"react-bootstrap\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[patients,setPatients]=useState([]);const[loading,setLoading]=useState(true);const[showModal,setShowModal]=useState(false);const[selectedPatient,setSelectedPatient]=useState(null);const navigate=useNavigate();useEffect(()=>{const unsubscribe=auth.onAuthStateChanged(currentUser=>{if(!currentUser){navigate(\"/\");}});return()=>unsubscribe();},[navigate]);// Fetch patient data from backend\nuseEffect(()=>{axios.get(\"${process.env.REACT_APP_BACKEND_URL}/api/patients/\").then(response=>{setPatients(response.data);setLoading(false);}).catch(error=>{console.error(\"Error fetching patients:\",error);setLoading(false);});},[]);const handleEditClick=patient=>{setSelectedPatient(patient);setShowModal(true);};const handleSaveChanges=()=>{axios.put(`${process.env.REACT_APP_BACKEND_URL}/api/patients/update/${selectedPatient.patientID}`,selectedPatient).then(response=>{alert(\"Patient details updated successfully!\");setShowModal(false);setPatients(patients.map(p=>p.patientID===selectedPatient.patientID?selectedPatient:p));}).catch(error=>{console.error(\"Error updating patient details:\",error);});};const handleDelete=patientID=>{if(window.confirm(\"Are you sure you want to delete this patient?\")){axios.delete(`${process.env.REACT_APP_BACKEND_URL}/api/patients/delete/${patientID}`).then(()=>{alert(\"Patient deleted successfully!\");setPatients(patients.filter(p=>p.patientID!==patientID));}).catch(error=>{console.error(\"Error deleting patient:\",error);});}};const handleChange=e=>{setSelectedPatient({...selectedPatient,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsxs(Container,{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Patient Dashboard\"}),loading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\"}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Patient ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BP\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sugar\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Heart Rate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:patients.map(patient=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:patient.patientID}),/*#__PURE__*/_jsx(\"td\",{children:patient.name}),/*#__PURE__*/_jsx(\"td\",{children:patient.age}),/*#__PURE__*/_jsx(\"td\",{children:patient.bp}),/*#__PURE__*/_jsx(\"td\",{children:patient.sugar}),/*#__PURE__*/_jsx(\"td\",{children:patient.heartRate}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"warning\",className:\"m-1\",onClick:()=>handleEditClick(patient),children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"m-1\",onClick:()=>handleDelete(patient.patientID),children:\"Delete\"})]})]},patient.patientID))})]}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:()=>setShowModal(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Patient Details\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:selectedPatient&&/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Blood Pressure\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"bp\",value:selectedPatient.bp,onChange:handleChange})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Sugar\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"sugar\",value:selectedPatient.sugar,onChange:handleChange})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Heart Rate\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"heartRate\",value:selectedPatient.heartRate,onChange:handleChange})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSaveChanges,children:\"Save Changes\"})]})]})]});};export default Dashboard;","map":{"version":3,"names":["useEffect","useState","axios","auth","useNavigate","Container","Table","Button","Spinner","Modal","Form","jsx","_jsx","jsxs","_jsxs","Dashboard","patients","setPatients","loading","setLoading","showModal","setShowModal","selectedPatient","setSelectedPatient","navigate","unsubscribe","onAuthStateChanged","currentUser","get","then","response","data","catch","error","console","handleEditClick","patient","handleSaveChanges","put","process","env","REACT_APP_BACKEND_URL","patientID","alert","map","p","handleDelete","window","confirm","delete","filter","handleChange","e","target","name","value","className","children","animation","striped","bordered","hover","age","bp","sugar","heartRate","variant","onClick","show","onHide","Header","closeButton","Title","Body","Group","Label","Control","type","onChange","Footer"],"sources":["C:/Users/aadi0/Desktop/Trials/t7/healthcare-frontend/src/pages/Dashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { auth } from \"../firebase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Container, Table, Button, Spinner, Modal, Form } from \"react-bootstrap\";\n\nconst Dashboard = () => {\n  const [patients, setPatients] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((currentUser) => {\n      if (!currentUser) {\n        navigate(\"/\");\n      }\n    });\n    return () => unsubscribe();\n  }, [navigate]);\n\n  // Fetch patient data from backend\n  useEffect(() => {\n    axios.get(\"${process.env.REACT_APP_BACKEND_URL}/api/patients/\")\n      .then((response) => {\n        setPatients(response.data);\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching patients:\", error);\n        setLoading(false);\n      });\n  }, []);\n\n  const handleEditClick = (patient) => {\n    setSelectedPatient(patient);\n    setShowModal(true);\n  };\n\n  const handleSaveChanges = () => {\n    axios.put(`${process.env.REACT_APP_BACKEND_URL}/api/patients/update/${selectedPatient.patientID}`, selectedPatient)\n      .then((response) => {\n        alert(\"Patient details updated successfully!\");\n        setShowModal(false);\n        setPatients(patients.map(p => p.patientID === selectedPatient.patientID ? selectedPatient : p));\n      })\n      .catch((error) => {\n        console.error(\"Error updating patient details:\", error);\n      });\n  };\n\n  const handleDelete = (patientID) => {\n    if (window.confirm(\"Are you sure you want to delete this patient?\")) {\n      axios.delete(`${process.env.REACT_APP_BACKEND_URL}/api/patients/delete/${patientID}`)\n        .then(() => {\n          alert(\"Patient deleted successfully!\");\n          setPatients(patients.filter(p => p.patientID !== patientID));\n        })\n        .catch((error) => {\n          console.error(\"Error deleting patient:\", error);\n        });\n    }\n  };\n\n  const handleChange = (e) => {\n    setSelectedPatient({ ...selectedPatient, [e.target.name]: e.target.value });\n  };\n\n  return (\n    <Container className=\"mt-5\">\n      <h1 className=\"mb-4\">Patient Dashboard</h1>\n      {loading ? (\n        <Spinner animation=\"border\" />\n      ) : (\n        <Table striped bordered hover>\n          <thead>\n            <tr>\n              <th>Patient ID</th>\n              <th>Name</th>\n              <th>Age</th>\n              <th>BP</th>\n              <th>Sugar</th>\n              <th>Heart Rate</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {patients.map((patient) => (\n              <tr key={patient.patientID}>\n                <td>{patient.patientID}</td>\n                <td>{patient.name}</td>\n                <td>{patient.age}</td>\n                <td>{patient.bp}</td>\n                <td>{patient.sugar}</td>\n                <td>{patient.heartRate}</td>\n                <td>\n                  <Button variant=\"warning\" className=\"m-1\" onClick={() => handleEditClick(patient)}>\n                    Edit\n                  </Button>\n                  <Button variant=\"danger\" className=\"m-1\" onClick={() => handleDelete(patient.patientID)}>\n                    Delete\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n\n      {/* Edit Patient Modal */}\n      <Modal show={showModal} onHide={() => setShowModal(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>Edit Patient Details</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {selectedPatient && (\n            <Form>\n              <Form.Group>\n                <Form.Label>Blood Pressure</Form.Label>\n                <Form.Control type=\"text\" name=\"bp\" value={selectedPatient.bp} onChange={handleChange} />\n              </Form.Group>\n              <Form.Group>\n                <Form.Label>Sugar</Form.Label>\n                <Form.Control type=\"text\" name=\"sugar\" value={selectedPatient.sugar} onChange={handleChange} />\n              </Form.Group>\n              <Form.Group>\n                <Form.Label>Heart Rate</Form.Label>\n                <Form.Control type=\"text\" name=\"heartRate\" value={selectedPatient.heartRate} onChange={handleChange} />\n              </Form.Group>\n            </Form>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowModal(false)}>Cancel</Button>\n          <Button variant=\"primary\" onClick={handleSaveChanges}>Save Changes</Button>\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}